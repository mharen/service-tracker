@model service_tracker_mvc.Models.User
@{
    Layout = "~/Views/Shared/_LayoutEditor.cshtml";
    ViewBag.Title = "Edit";
}
@if (this.ViewContext.FormContext == null) { this.ViewContext.FormContext = new FormContext(); }
@if (Model != null && Model.UserId > 0)
{
    @Html.HiddenFor(model => model.UserId)    
}

@if (!string.IsNullOrEmpty(Model.ClaimedIdentifier))
{ 
    @Html.Partial("PairEditor", new PairEditor()
    {
        Label = Html.LabelFor(model => model.ClaimedIdentifier),
        Editor = new MvcHtmlString(
            string.Format("<span title='{0}'>{1}</span>",
                Html.AttributeEncode(Model.ClaimedIdentifier),
                Html.Encode(Model.ClaimedIdentifier.PrettifyUrl()))),
        Validation = null
    })
}
else { 
    @Html.Partial("PairEditor", new PairEditor()
    {
        Label = Html.LabelFor(model => model.InvitationCode),
        Editor = new MvcHtmlString(string.Format("<em>Invitation Sent</em> ({0})",
            Html.ActionLink("resend", "SendInvite", new { id= Model.UserId }).ToHtmlString())),
        Validation = null
    })
}
@Html.Partial("PairEditor", new PairEditor()
{
    Label = Html.LabelFor(model => model.Email),
    Editor = Html.DisplayFor(model => model.Email),
    Validation = null
})
